{% extends "base.html" %}{% block content %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'blog/css/blog.css' %}">
{% endblock %}

<div class="overlay"></div>


<article class="media content-section container-bg">
    <div class="image-container">
        {% if "placeholder" in post.featured_image.url %}
        <img class="card-img-top"
            src="https://res.cloudinary.com/dq0myfpd3/image/upload/v1677098017/static/media/mental_health.80775316a494.jpg">
        {% else %}
        <img class="card-img-top" src=" {{ post.featured_image.url }}">
        {% endif %}
    </div>
    <div class="media-body mt-4">
        <div class="content-section">
            <div class="article-metadata">
                <a class="mr-2" href="#">{{ post.author }}</a>
                <small class="text-muted">{{ post.created_on|date:"F d, Y" }}</small>
                <!-- {% if object.author == user %}
      <div>
        <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{% url 'post-update' object.id %}">Update</a>
        <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'post-delete' object.id %}">Delete</a>
      </div>
      {% endif %} -->
            </div>
            <h3 class="article-title">{{ post.title }}</h3>
            <p class="article-content">{{ post.content|safe }}</p>

            <!-- Like/Unlike Post  -->
            <div class="row">
                <div class="col-1">
                    <!-- The number of likes goes before the closing strong tag -->
                    <strong class="text-secondary"><i class="far fa-heart"></i> {{ post.number_of_likes }} </strong>
                </div>
                <div class="col-1">
                    {% with comments.count as total_comments %}
                    <strong class="text-secondary"><i class="far fa-comments"></i>
                        <!-- Our total_comments variable goes before the closing strong tag -->
                        {{ total_comments }}</strong>
                    {% endwith %}
                </div>
            </div>
        </div>

        <div class="content-section">
        <!-- Comments  -->
        <h3 class="article-title">Comments</h3>
        {% if not post.comments.all %}
        No comments yet.. <a class="btn btn-primary" href="#">Add one</a>
        {% else %}
        {% for comment in post.comments.all %}
        <strong>{{ comment.name }} - {{ comment.created_on }}</strong>
        {{ comment.body | safe | linebreaks}}
        {% endfor %}
        <a class="btn btn-primary" href="#">Leave a comment:</a>
        {% endif %}
    </div>
    </div>
</article>
{% endblock content %}